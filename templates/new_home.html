<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css2?family=KoHo:ital,wght@0,200;0,300;0,400;1,300;1,600&family=Libre+Bodoni:ital,wght@0,400;0,500;0,600;0,700;1,600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../static/iprensa.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3.layout.cloud.js"></script>
    <title>iMprensa</title>
</head>
<body>
    <div class="explicacao">
    <h1 class="ml16">Passe o mouse sobre as caixas</h1>
</div>
    <div class="home">
        <div class="logo">
            <div class="intro">
                <div class="marca">
                    <h2>iPrensa</h2>
                    <img src="../static/detalhe.svg" alt="detalhe logo">
                    <div class="descricao">
                        <p>Uma plataformar para entender melhor a impresa na web.</p>
                    </div>
                </div>
            </div>
            <div class="sobre">
                <p>Este projeto foi construido no <i>Master em Jornalismo de Dados do Insper</i>.
                    A ideia √© que ele sirva como uma plataforma de an√°lise da imprensa, bem como
                    um reposit√≥rio de dados para pesquisas acad√™micas.</p>
                <p>Os dados s√£o raspados da home dos 6 jornais diariamente, de hora em hora.</p>
                <p>Caso voc√™ tenha interesse em fazer pesquisa com os dados, solicite por e-mail
                    para <a href="mailto:victorfariassb@gmail">victorfariassb@gmail.com</a>. Voc√™ tamb√©m
                    pode me encontrar no <a href="https://twitter.com/__victorfarias">Twitter</a>.
                    Tamb√©m √© poss√≠vel ver o reposit√≥rio do projeto no <a href="https://github.com/victorfariassb/radar_imprensa">GitHub</a>.
                </p>
            </div>
            <div class="botao">
                <button class="button">Outras an√°lises</button>
            </div>
        </div>
        <div class="palavra_dia">
            <div class="titulo-menor">Palavra do dia ‚úçÔ∏è</div>
            <p>Termo mais mencionado nas principais mat√©rias dos 6 jornais raspados. O dado √© referente ao dia anterior.
            </p>
            <p>{{ palavra_dia }}</p>
        </div>
        <div class="numero_materias">
            <p>O n√∫mero de mat√©rias analisadas at√© hoje. Os dados come√ßaram a ser coletados em janeiro de
                2022.</p>
            <p>{{ total_materias }}</p>
            <div class="titulo-menor">Mat√©rias raspadas</div>
        </div>
        <div class="esporte">
            <div class="titulo">Ranking dos times ‚öΩ</div>
            <p>A classifica√ß√£o leva em considera√ß√£o os times mais mencionados em t√≠tulos da se√ß√£o de esportes do Uol e
                da Globo.com.</p>
            <ol>
                {% for index, row in times_dados.iterrows() %}
                {% if index != 0 %}
                <li>{{ row[0] }} ‚Äî {{ row[1] }}</li>
                {% endif %}
                {% endfor %}
            </ol>
        </div>
        <div class="candidatos">
            <div class="titulo">Candidatos na imprensa üó≥Ô∏è</div>
            <p>Conta men√ß√µes aos candidatos nos sites raspados. Not√≠cias com o mesmo link
                raspadas 2 vezes s√£o consideradas como um √∫nico ponto. A ‚¨ÜÔ∏è √© referente aos √∫ltimos 7 dias.</p>
            <ol>
                {% for index, row in ranking_candidatos.iterrows() %}
                {% if index != 0 %}
                <li>{{ row[0] }} ‚Äî {{ row[2] }} ‚¨ÜÔ∏è{{ row[1] }}</li>
                {% endif %}
                {% endfor %}
            </ol>
        </div>
        <div class="escopo">
            <div class="titulo-rodape"><b>SITES RASPADOS:</b> Globo, Uol, Folha, Estad√£o, Jovem Pan, CNN</div>
        </div>
        <div class="atualizado">
            <div class="titulo-rodape"><b>ATUALIZADO EM:</b> {{ hora }}</div>
        </div>
    </div>
    <div class="wordcloud">
        <h2>Ontem em uma ‚òÅÔ∏è de palavras</h2>
        <div id="my_dataviz"></div>
        <script>
            // List of words
            var myWords = {{palavras|safe}}
            
            // set the dimensions and margins of the graph
            var margin = {top: 10, right: 10, bottom: 10, left: 10},
                width = 450 - margin.left - margin.right,
                height = 450 - margin.top - margin.bottom;
            
            // append the svg object to the body of the page
            var svg = d3.select("#my_dataviz").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
              .append("g")
                .attr("transform",
                      "translate(" + margin.left + "," + margin.top + ")");
            
            // Constructs a new cloud layout instance. It run an algorithm to find the position of words that suits your requirements
            var layout = d3.layout.cloud()
              .size([width, height])
              .words(myWords.map(function(d) { return {text: d}; }))
              .padding(10)
              .fontSize(60)
              .on("end", draw);
            layout.start();
            
            // This function takes the output of 'layout' above and draw the words
            // Better not to touch it. To change parameters, play with the 'layout' variable above
            function draw(words) {
              svg
                .append("g")
                  .attr("transform", "translate(" + layout.size()[0] / 2 + "," + layout.size()[1] / 2 + ")")
                  .selectAll("text")
                    .data(words)
                  .enter().append("text")
                    .style("font-size", function(d) { return d.size + "px"; })
                    .style("fill", "white")
                    .attr("text-anchor", "middle")
                    .attr("transform", function(d) {
                      return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
                    })
                    .text(function(d) { return d.text; });
            }
            </script>
    </div>
</body>
<script src="{{url_for('static', filename='app.js')}}"></script>
<script src='../static/app.js'></script>
</html>